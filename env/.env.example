# ============================================================================
# CONFIGURACIÓN DE ENTORNO - VIDLY API
# ============================================================================
#
# IMPORTANTE: Este archivo es una PLANTILLA con valores de ejemplo.
# NO contiene credenciales reales.
#
# Para usar este archivo:
# 1. Cópialo con el nombre del entorno deseado:
#    cp env/.env.example env/development.env
#    cp env/.env.example env/production.env
#    cp env/.env.example env/test.env
#
# 2. Edita el archivo copiado con valores reales
#
# 3. NUNCA commitees archivos .env con credenciales reales a Git
#
# ============================================================================

# ============================================================================
# CONFIGURACIÓN DE BASE DE DATOS
# ============================================================================
#
# MongoDB Connection String
#
# DESARROLLO LOCAL:
# DB=mongodb://localhost:27017/vidly
#
# DESARROLLO CON MONGODB ATLAS (Cloud):
# DB=mongodb+srv://username:password@cluster.mongodb.net/vidly?retryWrites=true&w=majority
#
# PRODUCCIÓN (MONGODB ATLAS):
# DB=mongodb+srv://prod-user:STRONG-PASSWORD@cluster-prod.mongodb.net/vidly-prod?retryWrites=true&w=majority
#
# TESTING:
# DB=mongodb://localhost:27017/vidly_test
#
# NOTAS EDUCATIVAS:
# - En producción, SIEMPRE usar MongoDB Atlas u otro servicio cloud profesional
# - Nunca exponer MongoDB sin autenticación
# - Usar bases de datos separadas para dev/test/prod
# - En testing, usar una base de datos diferente que se limpia entre tests
#
DB=mongodb://localhost:27017/vidly

# ============================================================================
# AUTENTICACIÓN Y SEGURIDAD
# ============================================================================
#
# JWT_PRIVATE_KEY: Clave secreta para firmar JSON Web Tokens
#
# ⚠️  EXTREMADAMENTE IMPORTANTE:
# - Esta clave DEBE ser ÚNICA y SECRETA en producción
# - Si se compromete, un atacante puede falsificar tokens
# - NUNCA usar valores predeterminados en producción
# - Cambiar esta clave invalida TODOS los tokens existentes
#
# CÓMO GENERAR UNA CLAVE SEGURA:
#
# Opción 1 - Node.js (recomendado):
#   node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# Opción 2 - OpenSSL:
#   openssl rand -base64 64
#
# Opción 3 - Herramienta online (solo para desarrollo, NO producción):
#   https://randomkeygen.com/
#
# LONGITUD RECOMENDADA:
# - Mínimo: 32 caracteres
# - Recomendado: 64+ caracteres
# - Usar caracteres alfanuméricos y símbolos
#
# EJEMPLO (NO USAR ESTE EN PRODUCCIÓN):
JWT_PRIVATE_KEY=dev-secret-key-replace-in-production-with-strong-random-key

# JWT_EXPIRES_IN: Tiempo de expiración de tokens
#
# FORMATO:
# - "1h" = 1 hora
# - "7d" = 7 días
# - "30d" = 30 días
# - "1y" = 1 año
#
# BUENAS PRÁCTICAS:
# - Desarrollo: 1d (1 día) para comodidad
# - Producción: 1h - 24h (depende del caso de uso)
# - Tokens de larga duración = mayor riesgo si se comprometen
# - Implementar refresh tokens para sesiones largas
#
JWT_EXPIRES_IN=1d

# ============================================================================
# CONFIGURACIÓN DEL SERVIDOR
# ============================================================================
#
# HOST: Dirección IP en la que escucha el servidor
#
# OPCIONES:
# - 127.0.0.1 o localhost: Solo accesible desde la máquina local (desarrollo)
# - 0.0.0.0: Accesible desde cualquier interfaz de red (producción, Docker)
#
# SEGURIDAD:
# - En desarrollo: 127.0.0.1 es más seguro
# - En producción con load balancer: 0.0.0.0
# - En Docker: 0.0.0.0 para permitir acceso desde el host
#
HOST=127.0.0.1

# PORT: Puerto en el que escucha el servidor
#
# CONVENCIONES:
# - 3000: Puerto común para Node.js en desarrollo
# - 8080: Puerto alternativo común
# - 80: HTTP estándar (requiere privilegios root en Linux)
# - 443: HTTPS estándar (requiere privilegios root en Linux)
#
# PRODUCCIÓN:
# - Usar puertos >= 1024 (no requieren root)
# - El load balancer (Nginx, Apache) maneja 80/443
# - El app Node.js corre en puerto alto (3000, 8080, etc.)
#
PORT=3000

# NODE_ENV: Entorno de ejecución
#
# VALORES VÁLIDOS:
# - development: Desarrollo local
# - production: Producción
# - test: Testing automatizado
#
# COMPORTAMIENTO POR ENTORNO:
#
# DEVELOPMENT:
# - Logs verbose a consola
# - Stack traces completos en errores
# - Sin rate limiting estricto
# - Morgan logging habilitado
# - No usa helmet/compression
#
# PRODUCTION:
# - Logs solo a archivos y MongoDB
# - Mensajes de error genéricos (sin exponer internals)
# - Rate limiting activo
# - Helmet con todos los headers de seguridad
# - Compression habilitado
# - No expone stack traces
#
# TEST:
# - Logs mínimos (solo errores)
# - Base de datos separada que se limpia
# - Sin rate limiting (para tests rápidos)
#
NODE_ENV=development

# ============================================================================
# LOGGING Y DEBUGGING
# ============================================================================
#
# LOG_LEVEL: Nivel de detalle de los logs
#
# NIVELES (de menos a más verbose):
# - error: Solo errores críticos
# - warn: Advertencias y errores
# - info: Información general + warn + error
# - debug: Todo (muy verbose)
#
# RECOMENDACIONES:
# - Development: debug (ver todo)
# - Production: info (balance entre detalle y ruido)
# - Test: error (solo lo crítico)
#
LOG_LEVEL=debug

# DEBUG: Variable para el paquete 'debug'
#
# USOS:
# - Vacío: No debug output
# - "Log": Habilitar debug logging del proyecto
# - "*": Habilitar debug de TODOS los módulos (muy verbose)
# - "express:*": Debug de Express solamente
#
# EN DESARROLLO:
DEBUG=Log

# EN PRODUCCIÓN (dejar vacío):
# DEBUG=

# ============================================================================
# RATE LIMITING
# ============================================================================
#
# Protección contra abuso y ataques de fuerza bruta
#
# RATE_LIMIT_ENABLED: Activar/desactivar rate limiting
#
# - true: Activado (recomendado en producción)
# - false: Desactivado (útil en desarrollo/testing)
#
RATE_LIMIT_ENABLED=false

# RATE_LIMIT_MAX: Máximo número de requests por ventana
#
# RECOMENDACIONES:
# - API pública: 60-100 requests/15min
# - API privada: 200-500 requests/15min
# - Endpoints de login: 5-10 requests/15min (más estricto)
#
RATE_LIMIT_MAX=100

# RATE_LIMIT_WINDOW: Ventana de tiempo en MINUTOS
#
# COMÚN: 15 minutos (900 segundos)
#
RATE_LIMIT_WINDOW=15

# ============================================================================
# CORS (Cross-Origin Resource Sharing)
# ============================================================================
#
# CORS_ORIGIN: Orígenes permitidos para hacer requests a la API
#
# FORMATOS:
# - Un solo origen: http://localhost:3000
# - Múltiples orígenes (separados por coma):
#   http://localhost:3000,https://vidly-app.vercel.app
# - Todos los orígenes (NO USAR EN PRODUCCIÓN):
#   *
#
# DESARROLLO:
# CORS_ORIGIN=http://localhost:3000,http://localhost:3001
#
# PRODUCCIÓN:
# CORS_ORIGIN=https://vidly-app.vercel.app,https://vidly-app-staging.vercel.app
#
# SEGURIDAD:
# - NUNCA usar "*" en producción
# - Solo listar dominios de confianza
# - Usar HTTPS en producción
# - Validar que el dominio es correcto (no http://evil.com@vidly.com)
#
CORS_ORIGIN=http://localhost:3000

# ============================================================================
# SERVICIOS EXTERNOS (OPCIONAL)
# ============================================================================
#
# Estos son opcionales pero útiles para producción profesional

# SENTRY_DSN: Error tracking y monitoring
#
# Sentry captura errores en producción y te notifica
# Gratis hasta cierto límite de eventos
#
# Obtener DSN en: https://sentry.io/
#
# EJEMPLO:
# SENTRY_DSN=https://abc123@o123456.ingest.sentry.io/123456
#
# DEJAR VACÍO SI NO SE USA:
SENTRY_DSN=

# REDIS_URL: Cache y sessions (avanzado)
#
# Para escalar la aplicación con múltiples instancias
# Almacenar sessions en Redis en lugar de memoria
#
# EJEMPLO:
# REDIS_URL=redis://localhost:6379
# REDIS_URL=redis://username:password@redis-server.com:6379
#
REDIS_URL=

# ============================================================================
# VARIABLES ESPECÍFICAS DE DEPLOYMENT
# ============================================================================
#
# Estas variables pueden ser necesarias según tu plataforma

# VERCEL (si despliegas a Vercel):
# - Vercel configura automáticamente muchas variables
# - Solo necesitas configurar DB y JWT_PRIVATE_KEY en el dashboard

# HEROKU (si despliegas a Heroku):
# - PORT se configura automáticamente
# - Configurar el resto en Settings > Config Vars

# DOCKER (si usas Docker):
# - Usar un archivo .env.docker
# - Montar como volume o pasar con --env-file

# ============================================================================
# CHECKLIST DE SEGURIDAD
# ============================================================================
#
# Antes de ir a producción, verifica:
#
# ✅ JWT_PRIVATE_KEY es una clave fuerte y única
# ✅ DB usa autenticación (usuario/password)
# ✅ DB está en una red privada o usa IP whitelist
# ✅ NODE_ENV=production
# ✅ LOG_LEVEL=info o warn
# ✅ DEBUG está vacío o deshabilitado
# ✅ RATE_LIMIT_ENABLED=true
# ✅ CORS_ORIGIN lista solo dominios confiables (no "*")
# ✅ HOST=0.0.0.0 si está detrás de load balancer
# ✅ Todas las credenciales están en variables de entorno (no hardcodeadas)
# ✅ .gitignore incluye /env/ (archivos .env no se commitean)
#
# ============================================================================
# RECURSOS PARA APRENDER MÁS
# ============================================================================
#
# Environment Variables Best Practices:
# - https://12factor.net/config
# - https://nodejs.org/en/learn/command-line/how-to-read-environment-variables-from-nodejs
#
# Security:
# - https://cheatsheetseries.owasp.org/cheatsheets/Nodejs_Security_Cheat_Sheet.html
# - https://expressjs.com/en/advanced/best-practice-security.html
#
# MongoDB Security:
# - https://docs.mongodb.com/manual/administration/security-checklist/
#
# JWT Best Practices:
# - https://tools.ietf.org/html/rfc8725
#
# ============================================================================
